openapi: 3.0.0
info:
  title: Quotation Request API
  version: '1.0'
  description: |
    ### UN Locodes

    We always follow the latest published version of the UN Locodes database, and recommend you do so as well.
    For example, CNSHA has been changed since 2016 and now refers to an Airport yet its often used as Shanghai for ocean. If you respond to an Ocean request with this code, expect your customer to see 'Shanghai Hongqiao International Apt, China' in the application and possibly be left very confused. Use CNSHG (Shanghai Port) or CNSGH (Shanghai) instead.

    Don't have a database yet? Check out our github repo with a sample database as well as code for generating your own: https://github.com/qwyk/unlocodes-python



    ### Available base_calculation_id

    These are the base_calculation_id values that can be used in the response `breakdown` object's `base_calculation_id` attribute:


    ID | Name | Description | Expression
    ---------|----------|---------|---------
    1|BL|Charge that applies per Bill of Lading|`max($RATE, $MINIMUM)`
    2|CONTAINER|Charge that applies per container|`max($RATE * $QUANTITY, $MINIMUM)`
    3|WM|Weight Measure for LCL|`max($RATE * $WEIGHT_KGS / 1000, $RATE * $VOLUME_CBM, $MINIMUM)`
    4|W|Charge per Ton|`max($RATE * ($WEIGHT_KGS / 1000), $MINIMUM)`
    5|M|Charge per Cubic Meter|`max($RATE * $VOLUME_CBM, $MINIMUM)`
    6|LUMPSUM|Flat charge|`$RATE`
    7|KG|Charge per kilogram|`max($RATE * $WEIGHT_KGS, $MINIMUM)`

    If you need more charge codes, please send your request to support@qwyk.io

    ### Supported currencies
    At present the following currencies are supported

    |Code|Sign|Name|
    |---|---|--------------------|
    |AUD|$  |Australian dollar   |
    |BGN|лв |Bulgarian lev       |
    |BRL|R$ |Brazilian real      |
    |CAD|$  |Canadian dollar     |
    |CHF|Fr |Swiss franc         |
    |CNY|¥  |Chinese Yuan        |
    |CZK|Kč |Czech koruna        |
    |DKK|kr |Danish krone        |
    |EUR|€  |Euro                |
    |GBP|£  |British Pound       |
    |HKD|$  |Hong Kong dollar    |
    |HUF|Ft |Hungarian forint    |
    |IDR|Rp |Indonesian rupiah   |
    |ILS|₪  |Israeli new shekel  |
    |INR|₹  |Indian Rupee        |
    |ISK|kr |Icelandic króna     |
    |JPY|¥  |Japanese yen        |
    |KRW|₩  |South Korean won    |
    |MXN|$  |Mexican peso        |
    |MYR|RM |Malaysian ringgit   |
    |NOK|kr |Norwegian krone     |
    |NZD|$  |New Zealand dollar  |
    |PHP|₱  |Philippine peso     |
    |PLN|zł |Polish złoty        |
    |RON|le |Romanian leu        |
    |RUB|₽  |Russian ruble       |
    |SEK|kr |Swedish krona       |
    |SGD|$  |Singapore dollar    |
    |THB|฿  |Thai baht           |
    |TRY|₺  |Turkish lira        |
    |USD|$  |United States Dollar|
    |ZAR|$  |South African rand  |
  contact:
    name: Qwyk
    url: 'https://www.qwyk.io'
    email: support@qwyk.io
servers:
  - url: 'https://your-server-address-here'
paths:
  '/{your-endpoint}':
    parameters:
      - schema:
          type: string
        name: your-endpoint
        in: path
        required: true
    post:
      summary: Quotation Request Webhook
      operationId: post
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: array
                minItems: 1
                uniqueItems: false
                items:
                  type: object
                  properties:
                    transport_mode:
                      type: string
                      enum:
                        - OCEAN
                        - AIR
                        - TRUCK
                    load_type:
                      type: string
                      enum:
                        - fcl
                        - lcl
                      maxLength: 3
                      minLength: 3
                    carrier_scac:
                      type:
                        - string
                        - 'null'
                      minLength: 4
                      maxLength: 4
                    carrier_name:
                      type:
                        - string
                        - 'null'
                      maxLength: 191
                    pol_locode:
                      type: string
                      minLength: 5
                      maxLength: 5
                    pod_locode:
                      type: string
                      minLength: 5
                      maxLength: 5
                    rate_name:
                      type:
                        - string
                        - 'null'
                      maxLength: 191
                    transit_time:
                      type: integer
                      minimum: 0
                    currency:
                      type: string
                      minLength: 3
                      maxLength: 3
                      description: Ideally matches the `currency` from the request. But can be any of the currencies documented
                    total_amount:
                      type: number
                      description: The total amount fo the quotation in the `currency` provided. !!!This value gets overwriten in case Margin calculations are active using a sum of the breakdown items.!!!
                    breakdown:
                      type: array
                      minItems: 1
                      description: 'A list of charges, at least 1 is required'
                      items:
                        type: object
                        description: A charge object defining a charge line item on the quotation
                        properties:
                          segment:
                            type: string
                            enum:
                              - pickup
                              - origin
                              - freight
                              - destination
                              - delivery
                          charge_code:
                            type: string
                            maxLength: 3
                          charge_description:
                            type: string
                            maxLength: 191
                          base_currency:
                            type: string
                            minLength: 3
                            maxLength: 3
                          base_rate:
                            type: number
                          base_calculation_id:
                            type: integer
                            description: Check documentation for options
                          base_minimum:
                            type: number
                          total_amount:
                            type: number
                          exchange_rate:
                            type: number
                          total_amount_quotation:
                            type: number
                          remarks:
                            type:
                              - string
                              - 'null'
                            maxLength: 5000
                        required:
                          - segment
                          - charge_code
                          - charge_description
                          - base_currency
                          - base_rate
                          - base_calculation_id
                          - base_minimum
                          - total_amount
                          - exchange_rate
                          - total_amount_quotation
                          - remarks
                    valid_from:
                      type:
                        - string
                        - 'null'
                      format: date-time
                    valid_until:
                      type:
                        - string
                        - 'null'
                      format: date-time
                    remarks:
                      type:
                        - string
                        - 'null'
                      maxLength: 5000
                  required:
                    - transport_mode
                    - load_type
                    - carrier_scac
                    - carrier_name
                    - pol_locode
                    - pod_locode
                    - rate_name
                    - transit_time
                    - currency
                    - total_amount
                    - breakdown
                    - valid_from
                    - valid_until
                    - remarks
              examples:
                Example response:
                  value:
                    - transport_mode: OCEAN
                      load_type: fcl
                      carrier_scac: MAEU
                      carrier_name: Maersk Line
                      pol_locode: NLRTM
                      pod_locode: SGSIN
                      rate_name: Maersk FAK Rates EU-AS
                      transit_time: 28
                      currency: USD
                      total_amount: 1440.39
                      breakdown:
                        - segment: origin
                          charge_code: THC
                          charge_description: Terminal Handling Charges
                          base_currency: EUR
                          base_rate: 200
                          base_calculation_id: 2
                          base_minimum: 200
                          total_amount: 200
                          exchange_rate: 1.2
                          total_amount_quotation: 240
                          remarks: Includes documentation
                        - segment: freight
                          charge_code: OFR
                          charge_description: Ocean Freight
                          base_currency: USD
                          base_rate: 1000
                          base_calculation_id: 2
                          base_minimum: 1000
                          total_amount: 1000
                          exchange_rate: 1
                          total_amount_quotation: 1000
                          remarks: 'Includes BAF, CAF, other things'
                        - segment: destination
                          charge_code: DOR
                          charge_description: Delivery Order
                          base_currency: SGD
                          base_rate: 274.73
                          base_calculation_id: 1
                          base_minimum: 274.73
                          total_amount: 274.73
                          exchange_rate: 0.7311
                          total_amount_quotation: 200.69
                          remarks: 'Includes BAF, CAF, other things'
                      remarks: |-
                        Does not include overweight charges
                        Hazardous charges may apply
                      valid_from: '2020-08-01T00:00:00+00:00'
                      valid_until: '2020-08-30T23:59:59+00:00'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: array
                items: {}
              examples:
                Example:
                  value: []
      description: 'Upon a customer creating a quotation, Qwyk will make this request to a configured endpoint, and synchronously wait for the response for a maximum of 60 seconds (including the initial request duration). The responded rates will then be appended to the quotation.'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                  example: 913cff5e-ab12-4a80-bdad-4a47bce25254
                owner:
                  type: object
                  required:
                    - id
                    - type
                    - name
                    - email
                    - team_id
                    - team_name
                    - job_title
                    - company
                    - location
                  properties:
                    id:
                      type: string
                      example: ea93fe35-2dc6-4751-a7db-a84a998dcc48
                    type:
                      type: string
                      example: portals-user
                    name:
                      type: string
                      example: Martyn
                    email:
                      type: string
                      example: o
                    team_id:
                      type: string
                      example: 5233d8dc-df75-4c5f-8766-4f766def1833
                    team_name:
                      type: string
                      example: Qwyk
                    job_title:
                      type: string
                      example: Keyboard Monkey
                    company:
                      type:
                        - string
                        - 'null'
                      example: Qwyk
                    location:
                      type:
                        - string
                        - 'null'
                      example: 'Dordt, ZH, NL'
                owner_reference:
                  type:
                    - string
                    - 'null'
                  example: This is a test quote
                origin:
                  $ref: '#/components/schemas/QuotationRequestLocation'
                destination:
                  $ref: '#/components/schemas/QuotationRequestLocation'
                transport_mode:
                  type: string
                  enum:
                    - OCEAN
                    - AIR
                    - TRUCK
                load_type:
                  type: string
                  enum:
                    - fcl
                    - lcl
                  description: always fcl or lcl but means ftl and ltl when transport_mode=TRUCK
                cargo_ready:
                  type: string
                  format: date-time
                commodity:
                  type: object
                  required:
                    - id
                    - code
                    - description
                  properties:
                    id:
                      type: integer
                      example: 1
                    code:
                      type: string
                      example: FAK0
                    description:
                      type: string
                      example: Freight All Kinds - Non Hazardous
                currency:
                  type: string
                  minLength: 3
                  maxLength: 3
                  example: USD
                  description: Currency the customer has requested the rate to be in
                packages:
                  type: array
                  minItems: 1
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                      quantity:
                        type: integer
                        example: 1
                        minimum: 1
                      packaging:
                        type: object
                        required:
                          - id
                          - code
                          - description
                        properties:
                          id:
                            type: integer
                          code:
                            type: string
                            example: '20'
                          description:
                            type: string
                            example: 20' Container
                      unit_weight:
                        type:
                          - number
                          - 'null'
                        description: only guaranteed when load_type = lcl
                        example: 2000
                      unit_length:
                        type:
                          - number
                          - 'null'
                        description: only guaranteed when load_type = lcl
                      unit_width:
                        type:
                          - number
                          - 'null'
                        description: only guaranteed when load_type = lcl
                      unit_height:
                        type:
                          - number
                          - 'null'
                        description: only guaranteed when load_type = lcl
                      unit_volume:
                        type:
                          - number
                          - 'null'
                        description: only guaranteed when load_type = lcl
                      uom:
                        type:
                          - string
                          - 'null'
                        enum:
                          - metric
                          - imperial
                        description: only guaranteed when load_type = lcl
                        example: metric
                      total_weight_kgs:
                        type: number
                      total_volume_cbm:
                        type: number
                        example: 2000
                    required:
                      - id
                      - quantity
                      - packaging
                      - unit_weight
                      - unit_length
                      - unit_width
                      - unit_height
                      - unit_volume
                      - uom
                      - total_weight_kgs
                      - total_volume_cbm
                total_quantity:
                  type: integer
                  example: 1
                total_weight_kgs:
                  type: number
                  example: 2000
                total_volume_cbm:
                  type: number
                  example: 0
                created_at:
                  type: string
                  format: date-time
                additionals:
                  type: object
                  properties:
                    call_before_delivery:
                      type: boolean
                    cargo_insurance:
                      type: boolean
                    customs_clearance:
                      type: boolean
                    delivery_appointment_required:
                      type: boolean
                    flatbed_required:
                      type: boolean
                    hazardous_cargo:
                      type: boolean
                    liftgate_delivery:
                      type: boolean
                    liftgate_pickup:
                      type: boolean
                    limited_access_delivery:
                      type: boolean
                    limited_access_pickup:
                      type: boolean
                    refrigerated:
                      type: boolean
                    residential_delivery:
                      type: boolean
                    residential_pickup:
                      type: boolean
                    stackable:
                      type: boolean
                    white_glove:
                      type: boolean
              required:
                - id
                - owner
                - owner_reference
                - origin
                - destination
                - transport_mode
                - load_type
                - cargo_ready
                - commodity
                - currency
                - packages
                - total_quantity
                - total_weight_kgs
                - total_volume_cbm
                - created_at
            examples:
              Port to Port Ocean FCL:
                value:
                  id: 913cff5e-ab12-4a80-bdad-4a47bce25254
                  owner:
                    id: ea93fe35-2dc6-4751-a7db-a84a998dcc48
                    type: portals-user
                    name: Martyn Verhaegen
                    email: martyn@qwyk.io
                    team_id: 5233d8dc-df75-4c5f-8766-4f766def1833
                    team_name: Qwyk
                    job_title: CEO
                    company: Qwyk
                    location: Dordrecht
                  owner_reference: null
                  origin:
                    type: port
                    code: AEKHL
                    locode: AEKHL
                    name: Mina Khalifa/Abu Dhabi
                    country_code: AE
                  destination:
                    type: port
                    code: BEANR
                    name: 'Antwerpen, VAN'
                    locode: BEANR
                    country_code: BE
                  transport_mode: OCEAN
                  load_type: fcl
                  cargo_ready: '2020-08-08T18:34:38+00:00'
                  commodity:
                    id: 1
                    code: FAK0
                    description: Freight All Kinds - Non Hazardous
                    is_preferred: 1
                  currency: USD
                  packages:
                    - id: 184
                      quantity: 3
                      packaging:
                        id: 1
                        code: '20'
                        description: 20' Container
                        transport_mode: OCEAN
                        load_type: fcl
                      unit_weight: null
                      unit_volume: null
                      unit_length: null
                      unit_width: null
                      unit_height: null
                      uom: null
                      total_weight_kgs: 0
                      total_volume_cbm: 0
                  total_quantity: 3
                  total_weight_kgs: 0
                  total_volume_cbm: 0
                  created_at: '2020-08-08T18:34:44+00:00'
                  additionals:
                    call_before_delivery: false
                    cargo_insurance: false
                    customs_clearance: false
                    delivery_appointment_required: false
                    flatbed_required: false
                    hazardous_cargo: false
                    liftgate_delivery: false
                    liftgate_pickup: false
                    limited_access_delivery: false
                    limited_access_pickup: false
                    refrigerated: false
                    residential_delivery: false
                    residential_pickup: false
                    stackable: false
                    white_glove: false
              Port to Port Ocean LCL:
                value:
                  id: 913cf60d-6b14-4112-9ddc-a3d7af2f0948
                  owner:
                    id: ea93fe35-2dc6-4751-a7db-a84a998dcc48
                    type: portals-user
                    name: Martyn Verhaegen
                    email: martyn@qwyk.io
                    team_id: 5233d8dc-df75-4c5f-8766-4f766def1833
                    team_name: Qwyk
                    job_title: CEO
                    company: Qwyk
                    location: Dordrecht
                  owner_reference: null
                  origin:
                    type: port
                    code: USCHI
                    locode: USCHI
                    name: 'Chicago, IL'
                    country_code: US
                  destination:
                    type: port
                    code: GBLON
                    name: 'London, LND'
                    locode: GBLON
                    country_code: GB
                  transport_mode: OCEAN
                  load_type: lcl
                  cargo_ready: '2020-08-08T18:08:01+00:00'
                  commodity:
                    id: 1
                    code: FAK0
                    description: Freight All Kinds - Non Hazardous
                    is_preferred: 1
                  currency: USD
                  packages:
                    - id: 181
                      quantity: 1
                      packaging:
                        id: 3
                        code: CARTON
                        description: Carton(s)
                        transport_mode: OCEAN
                        load_type: lcl
                      unit_weight: 434
                      unit_volume: 0.039
                      unit_length: 34
                      unit_width: 34
                      unit_height: 34
                      uom: metric
                      total_weight_kgs: 434
                      total_volume_cbm: 0.039
                  total_quantity: 1
                  total_weight_kgs: 434
                  total_volume_cbm: 0.039
                  created_at: '2020-08-08T18:08:41+00:00'
                  additionals:
                    call_before_delivery: false
                    cargo_insurance: false
                    customs_clearance: false
                    delivery_appointment_required: false
                    flatbed_required: false
                    hazardous_cargo: false
                    liftgate_delivery: false
                    liftgate_pickup: false
                    limited_access_delivery: false
                    limited_access_pickup: false
                    refrigerated: false
                    residential_delivery: false
                    residential_pickup: false
                    stackable: false
                    white_glove: false
              Door to Port Ocean FCL:
                value:
                  id: 91425284-c425-4e12-b044-500b7dc8d6d1
                  owner:
                    id: ea93fe35-2dc6-4751-a7db-a84a998dcc48
                    type: portals-user
                    name: Martyn Verhaegen
                    email: martyn@qwyk.io
                    team_id: 5233d8dc-df75-4c5f-8766-4f766def1833
                    team_name: Qwyk
                    job_title: CEO
                    company: Qwyk
                    location: Dordrecht
                  owner_reference: null
                  origin:
                    type: place
                    code: 'G:ChIJT08M2DIpxEcRhHVJ1WdmeNY|X:4.6689416|Y:51.8152357|C:NL|P:3311 XR'
                    locode: NLDOR
                    name: 'Nieuwstraat 7, 3311 XR Dordrecht, Netherlands'
                    country_code: NL
                  destination:
                    type: port
                    code: SGSIN
                    name: Singapore
                    locode: SGSIN
                    country_code: SG
                  transport_mode: OCEAN
                  load_type: fcl
                  cargo_ready: '2020-08-11T10:04:20+00:00'
                  commodity:
                    id: 1
                    code: FAK0
                    description: Freight All Kinds - Non Hazardous
                    is_preferred: 1
                  currency: USD
                  packages:
                    - id: 186
                      quantity: 1
                      packaging:
                        id: 1
                        code: '20'
                        description: 20' Container
                        transport_mode: OCEAN
                        load_type: fcl
                      unit_weight: null
                      unit_volume: null
                      unit_length: null
                      unit_width: null
                      unit_height: null
                      uom: null
                      total_weight_kgs: 0
                      total_volume_cbm: 0
                  total_quantity: 1
                  total_weight_kgs: 0
                  total_volume_cbm: 0
                  created_at: '2020-08-11T10:06:23+00:00'
                  additionals:
                    call_before_delivery: false
                    cargo_insurance: false
                    customs_clearance: false
                    delivery_appointment_required: false
                    flatbed_required: false
                    hazardous_cargo: false
                    liftgate_delivery: false
                    liftgate_pickup: false
                    limited_access_delivery: false
                    limited_access_pickup: false
                    refrigerated: false
                    residential_delivery: false
                    residential_pickup: false
                    stackable: false
                    white_glove: false
              Door to Door Truck FTL:
                value:
                  id: 914814ee-4625-4f82-a7be-431cf3f321bb
                  owner:
                    id: ea93fe35-2dc6-4751-a7db-a84a998dcc48
                    type: portals-user
                    name: Martyn Verhaegen
                    email: martyn@qwyk.io
                    team_id: 5233d8dc-df75-4c5f-8766-4f766def1833
                    team_name: Qwyk
                    job_title: CEO
                    company: Qwyk
                    location: Dordrecht
                  owner_reference: null
                  origin:
                    type: place
                    code: 'G:ChIJvfEkd2fwwIcRXaijSRtCGz8|X:-94.5822881|Y:39.0986507|C:US|P:64106'
                    locode: USMKC
                    name: '50 E 13th St, Kansas City, MO 64106, USA'
                    country_code: US
                  destination:
                    type: place
                    code: 'G:ChIJCa5EURCxD4gR0Yv46b3dfDA|X:-87.960511|Y:42.0085447|C:US|P:60007'
                    name: '1200 Busse Rd, Elk Grove Village, IL 60007, USA'
                    locode: USCHI
                    country_code: US
                  transport_mode: TRUCK
                  load_type: fcl
                  cargo_ready: '2020-08-14T06:48:14+00:00'
                  commodity:
                    id: 1
                    code: FAK0
                    description: Freight All Kinds - Non Hazardous
                    is_preferred: 1
                  currency: USD
                  packages:
                    - id: 209
                      quantity: 1
                      packaging:
                        id: 9
                        code: '53'
                        description: 53' Trailer
                        transport_mode: TRUCK
                        load_type: fcl
                      unit_weight: null
                      unit_volume: null
                      unit_length: null
                      unit_width: null
                      unit_height: null
                      uom: null
                      total_weight_kgs: 0
                      total_volume_cbm: 0
                  total_quantity: 1
                  total_weight_kgs: 0
                  total_volume_cbm: 0
                  created_at: '2020-08-14T06:49:08+00:00'
                  additionals:
                    call_before_delivery: false
                    cargo_insurance: false
                    customs_clearance: false
                    delivery_appointment_required: false
                    flatbed_required: false
                    hazardous_cargo: false
                    liftgate_delivery: false
                    liftgate_pickup: false
                    limited_access_delivery: false
                    limited_access_pickup: false
                    refrigerated: false
                    residential_delivery: false
                    residential_pickup: false
                    stackable: false
                    white_glove: false
        description: ''
      tags:
        - Webhooks
components:
  schemas:
    QuotationRequestLocation:
      title: QuotationRequestLocation
      type: object
      x-tags:
        - Models
      properties:
        type:
          type: string
          enum:
            - port
            - place
          description: '`port` for a port move, `place` for a door move'
          example: port
        code:
          type: string
          description: |-
            locode when type is port, structured data when type is place

            structured data:
            G:|X:|Y:|C:|P:

            Where:
            G: Google Places ID
            X: Longtitude
            Y: Latitude
            C: Country code
            P: Postal code
          example: 'G:ChIJT08M2DIpxEcRhHVJ1WdmeNY|X:4.6689416|Y:51.8152357|C:NL|P:3311XR'
        name:
          type: string
          example: 'Rotterdam, Netherlands'
        locode:
          type: string
          minLength: 5
          maxLength: 5
          example: NLRTM
        country_code:
          type: string
          minLength: 2
          maxLength: 2
          example: NL
      required:
        - type
        - code
        - name
        - locode
        - country_code
  securitySchemes: {}
